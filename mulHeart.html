<!DOCTYPE html>
<html lang="en">
<style>
    body {
        background-color: #1a1212;
    }
</style>
<script type="module">
    import './demoSetup.js'
    import { iconColor } from './cssTokens.js'
import { hearts } from './mulHeartIcon.js'
import { html, component, css, useCSS, assign, createMachine } from 'https://deno.land/x/mulink@0.0.25/deps.js'
import { useMachine } from 'https://deno.land/x/mulink@0.0.25/useMachine.js'

export const likeMachine = createMachine({
    initial: 'unliked',
    states: {
      unliked: { on: { toggle: 'liking'}},
      liking: { after: { 600: 'liked'} },
      liked: { on: { toggle: 'unliking'}},
      unliking: { after: { 600: 'unliked'}}
    }
  });

function MulHeart(element) {
  const { state, send } = useMachine(likeMachine)
  const onClick = () => send('toggle')
  const heart = hearts[state.value]
  useCSS(element, [mulHeart])
  return html`
    <span @click=${onClick} class="heart" id="toggle-btn">
      ${heart}
    </span>
  `
}

const mulHeart = css`
  .heart {
    width: 30px;
    height: 30px;
    cursor: pointer;
    opacity: 0.6;
    display: block;
  }

  .heartIcon {
    fill: ${iconColor};
  }

  .heart:hover {
  opacity: 1;
  }
`

customElements.define("mul-heart", component(MulHeart))
</script>
<mul-heart></mul-heart>
</html>